(window.webpackJsonp=window.webpackJsonp||[]).push([["npm.vue-lazyload"],{caf9:function(Q,t,R){"use strict";function e(t){return null==t||"function"!=typeof t&&"object"!=typeof t}function r(t,e){if(null==t)throw new TypeError("expected first argument to be an object.");if(void 0===e||"undefined"==typeof Symbol)return t;if("function"!=typeof Object.getOwnPropertySymbols)return t;for(var r=Object.prototype.propertyIsEnumerable,i=Object(t),n=arguments.length,s=0;++s<n;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),d=0;d<a.length;d++){var l=a[d];r.call(o,l)&&(i[l]=o[l])}return i}function i(t){var e=typeof t;return"undefined"===e?"undefined":null===t?"null":!0===t||!1===t||t instanceof Boolean?"boolean":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?void 0!==t.constructor.name&&"Generator"===t.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(t)?"array":t instanceof RegExp?"regexp":t instanceof Date?"date":"[object RegExp]"===(e=o.call(t))?"regexp":"[object Date]"===e?"date":"[object Arguments]"===e?"arguments":"[object Error]"===e?"error":"[object Promise]"===e?"promise":(t=t).constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)?"buffer":"[object Set]"===e?"set":"[object WeakSet]"===e?"weakset":"[object Map]"===e?"map":"[object WeakMap]"===e?"weakmap":"[object Symbol]"===e?"symbol":"[object Map Iterator]"===e?"mapiterator":"[object Set Iterator]"===e?"setiterator":"[object String Iterator]"===e?"stringiterator":"[object Array Iterator]"===e?"arrayiterator":"[object Int8Array]"===e?"int8array":"[object Uint8Array]"===e?"uint8array":"[object Uint8ClampedArray]"===e?"uint8clampedarray":"[object Int16Array]"===e?"int16array":"[object Uint16Array]"===e?"uint16array":"[object Int32Array]"===e?"int32array":"[object Uint32Array]"===e?"uint32array":"[object Float32Array]"===e?"float32array":"[object Float64Array]"===e?"float64array":"object"}var n=Object.freeze({__proto__:null,default:e,__moduleExports:e}),s=Object.freeze({__proto__:null,default:r,__moduleExports:r}),o=Object.prototype.toString;var a=Object.freeze({__proto__:null,default:i,__moduleExports:i}),d=n&&e,l=s&&r,h=a&&i;function c(t){t=t||{};var e=arguments.length,r=0;if(1!==e)for(;++r<e;){var i,n=arguments[r];if(d(t)&&(t=n),u(n)){s=void 0;o=void 0;a=void 0;i=void 0;var s=t;var o=n;for(var a in l(s,o),o)(function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t})(a)&&function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o,a)&&(u(i=o[a])?("undefined"===h(s[a])&&"function"===h(i)&&(s[a]=i),s[a]=c(s[a]||{},i)):s[a]=i)}}return t}function u(t){return"object"===h(t)||"function"===h(t)}var p=c;const b="undefined"!=typeof window&&null!==window,f=!!(b&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)&&("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),!0);const g={event:"event",observer:"observer"},v=function(){if(b)return"function"==typeof window.CustomEvent?window.CustomEvent:(t.prototype=window.Event.prototype,t);function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}}();function m(t,e){!t.length||-1<(e=t.indexOf(e))&&t.splice(e,1)}function y(o,a){if("IMG"===o.tagName&&o.getAttribute("data-srcset")){let t=o.getAttribute("data-srcset");const d=[],l=o.parentNode,h=l.offsetWidth*a;let e,r,i;(t=t.trim().split(",")).map(t=>{t=t.trim(),e=t.lastIndexOf(" "),i=-1===e?(r=t,999998):(r=t.substr(0,e),parseInt(t.substr(e+1,t.length-e-2),10)),d.push([i,r])}),d.sort(function(t,e){if(t[0]<e[0])return 1;if(t[0]>e[0])return-1;if(t[0]===e[0]){if(-1!==e[1].indexOf(".webp",e[1].length-5))return 1;if(-1!==t[1].indexOf(".webp",t[1].length-5))return-1}return 0});let n,s="";for(let t=0;t<d.length;t++){n=d[t],s=n[1];const o=d[t+1];if(o&&o[0]<h){s=n[1];break}if(!o){s=n[1];break}}return s}}function w(r,i){let n;for(let t=0,e=r.length;t<e;t++)if(i(r[t])){n=r[t];break}return n}const _=function(){if(b){let t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}}(),L={on(t,e,r,i=!1){_?t.addEventListener(e,r,{capture:i,passive:!0}):t.addEventListener(e,r,i)},off(t,e,r,i=!1){t.removeEventListener(e,r,i)}},E=(t,e,r)=>{let i=new Image;if(!t||!t.src){const t=new Error("image src is required");return r(t)}i.src=t.src,t.cors&&(i.crossOrigin=t.cors),i.onload=function(){e({naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,src:i.src})},i.onerror=function(t){r(t)}},A=(t,e)=>"undefined"!=typeof getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.style[e],z=t=>A(t,"overflow")+A(t,"overflow-y")+A(t,"overflow-x");function j(){}class O{constructor({max:t}){this.options={max:t||100},this._caches=[]}has(t){return-1<this._caches.indexOf(t)}add(t){this.has(t)||(this._caches.push(t),this._caches.length>this.options.max&&this.free())}free(){this._caches.shift()}}class x{constructor({el:t,src:e,error:r,loading:i,bindType:n,$parent:s,options:o,cors:a,elRenderer:d,imageCache:l}){this.el=t,this.src=e,this.error=r,this.loading=i,this.bindType=n,this.attempt=0,this.cors=a,this.naturalHeight=0,this.naturalWidth=0,this.options=o,this.rect=null,this.$parent=s,this.elRenderer=d,this._imageCache=l,this.performanceData={init:Date.now(),loadStart:0,loadEnd:0},this.filter(),this.initState(),this.render("loading",!1)}initState(){"dataset"in this.el?this.el.dataset.src=this.src:this.el.setAttribute("data-src",this.src),this.state={loading:!1,error:!1,loaded:!1,rendered:!1}}record(t){this.performanceData[t]=Date.now()}update({src:t,loading:e,error:r}){var i=this.src;this.src=t,this.loading=e,this.error=r,this.filter(),i!==this.src&&(this.attempt=0,this.initState())}getRect(){this.rect=this.el.getBoundingClientRect()}checkInView(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>this.options.preLoadTop&&this.rect.left<window.innerWidth*this.options.preLoad&&0<this.rect.right}filter(){!function(e){if(!(e instanceof Object))return[];if(Object.keys)return Object.keys(e);{let t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}}(this.options.filter).map(t=>{this.options.filter[t](this,this.options)})}renderLoading(e){this.state.loading=!0,E({src:this.loading,cors:this.cors},t=>{this.render("loading",!1),this.state.loading=!1,e()},()=>{e(),this.state.loading=!1,this.options.silent})}load(e=j){return this.attempt>this.options.attempt-1&&this.state.error?(this.options.silent,void e()):this.state.rendered&&this.state.loaded?void 0:this._imageCache.has(this.src)?(this.state.loaded=!0,this.render("loaded",!0),this.state.rendered=!0,e()):void this.renderLoading(()=>{this.attempt++,this.options.adapter.beforeLoad&&this.options.adapter.beforeLoad(this,this.options),this.record("loadStart"),E({src:this.src,cors:this.cors},t=>{this.naturalHeight=t.naturalHeight,this.naturalWidth=t.naturalWidth,this.state.loaded=!0,this.state.error=!1,this.record("loadEnd"),this.render("loaded",!1),this.state.rendered=!0,this._imageCache.add(this.src),e()},t=>{this.options.silent,this.state.error=!0,this.state.loaded=!1,this.render("error",!1)})})}render(t,e){this.elRenderer(this,t,e)}performance(){let t="loading",e=0;return this.state.loaded&&(t="loaded",e=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(t="error"),{src:this.src,state:t,time:e}}$destroy(){this.el=null,this.src=null,this.error=null,this.loading=null,this.bindType=null,this.attempt=0}}const I="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",T=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],$={rootMargin:"0px",threshold:0};function C(l){return class{constructor({preLoad:t,error:e,throttleWait:r,preLoadTop:i,dispatchEvent:n,loading:s,attempt:o,silent:a=!0,scale:d,listenEvents:l,filter:h,adapter:c,observer:u,observerOptions:p}){this.version='"1.3.4"',this.mode=g.event,this.ListenerQueue=[],this.TargetIndex=0,this.TargetQueue=[],this.options={silent:a,dispatchEvent:!!n,throttleWait:r||200,preLoad:t||1.3,preLoadTop:i||0,error:e||I,loading:s||I,attempt:o||3,scale:d||([a=1]=[d],b&&window.devicePixelRatio||a),ListenEvents:l||T,hasbind:!1,supportWebp:function(){if(!b)return!1;let e=!0;try{const t=document.createElement("canvas");t.getContext&&t.getContext("2d")&&(e=0===t.toDataURL("image/webp").indexOf("data:image/webp"))}catch(t){e=!1}return e}(),filter:h||{},adapter:c||{},observer:!!u,observerOptions:p||$},this._initEvent(),this._imageCache=new O({max:200}),this.lazyLoadHandler=function(n,s){let o=null,a=null,d=0,t;return function(){if(t=!0,!o){let t=Date.now()-d,e=this,r=arguments,i=function(){d=Date.now(),o=!1,n.apply(e,r)};s<=t?i():o=setTimeout(i,s),clearTimeout(a),a=setTimeout(i,2*s)}}}(this._lazyLoadHandler.bind(this),this.options.throttleWait),this.setMode(this.options.observer?g.observer:g.event)}config(t={}){p(this.options,t)}performance(){let e=[];return this.ListenerQueue.map(t=>{e.push(t.performance())}),e}addLazyBox(t){this.ListenerQueue.push(t),b&&(this._addListenerTarget(window),this._observer&&this._observer.observe(t.el),t.$el&&t.$el.parentNode&&this._addListenerTarget(t.$el.parentNode))}add(r,i,n){if(function(r,i){let n=!1;for(let t=0,e=r.length;t<e;t++)if(i(r[t])){n=!0;break}return n}(this.ListenerQueue,t=>t.el===r))return this.update(r,i),l.nextTick(this.lazyLoadHandler);let{src:s,loading:o,error:a,cors:d}=this._valueFormatter(i.value);l.nextTick(()=>{s=y(r,this.options.scale)||s,this._observer&&this._observer.observe(r);var t=Object.keys(i.modifiers)[0];let e;e=(e=t?(e=n.context.$refs[t])?e.$el||e:document.getElementById(t):e)||(e=>{if(b){if(e instanceof HTMLElement){let t=e;for(;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(z(t)))return t;t=t.parentNode}}return window}})(r);t=new x({bindType:i.arg,$parent:e,el:r,loading:o,error:a,src:s,cors:d,elRenderer:this._elRenderer.bind(this),options:this.options,imageCache:this._imageCache});this.ListenerQueue.push(t),b&&(this._addListenerTarget(window),this._addListenerTarget(e)),this.lazyLoadHandler(),l.nextTick(()=>this.lazyLoadHandler())})}update(e,t,r){let{src:i,loading:n,error:s}=this._valueFormatter(t.value);i=y(e,this.options.scale)||i;const o=w(this.ListenerQueue,t=>t.el===e);o?o.update({src:i,loading:n,error:s}):this.add(e,t,r),this._observer&&(this._observer.unobserve(e),this._observer.observe(e)),this.lazyLoadHandler(),l.nextTick(()=>this.lazyLoadHandler())}remove(e){if(e){this._observer&&this._observer.unobserve(e);const t=w(this.ListenerQueue,t=>t.el===e);t&&(this._removeListenerTarget(t.$parent),this._removeListenerTarget(window),m(this.ListenerQueue,t),t.$destroy())}}removeComponent(t){t&&(m(this.ListenerQueue,t),this._observer&&this._observer.unobserve(t.el),t.$parent&&t.$el.parentNode&&this._removeListenerTarget(t.$el.parentNode),this._removeListenerTarget(window))}setMode(t){f||t!==g.observer||(t=g.event),(this.mode=t)===g.event?(this._observer&&(this.ListenerQueue.forEach(t=>{this._observer.unobserve(t.el)}),this._observer=null),this.TargetQueue.forEach(t=>{this._initListen(t.el,!0)})):(this.TargetQueue.forEach(t=>{this._initListen(t.el,!1)}),this._initIntersectionObserver())}_addListenerTarget(e){if(e){let t=w(this.TargetQueue,t=>t.el===e);return t?t.childrenCount++:(t={el:e,id:++this.TargetIndex,childrenCount:1,listened:!0},this.mode===g.event&&this._initListen(t.el,!0),this.TargetQueue.push(t)),this.TargetIndex}}_removeListenerTarget(r){this.TargetQueue.forEach((t,e)=>{t.el===r&&(t.childrenCount--,t.childrenCount||(this._initListen(t.el,!1),this.TargetQueue.splice(e,1)))})}_initListen(e,r){this.options.ListenEvents.forEach(t=>L[r?"on":"off"](e,t,this.lazyLoadHandler))}_initEvent(){this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=(t,e)=>{this.Event.listeners[t]||(this.Event.listeners[t]=[]),this.Event.listeners[t].push(e)},this.$once=(e,r)=>{const i=this;this.$on(e,function t(){i.$off(e,t),r.apply(i,arguments)})},this.$off=(t,e)=>{e?m(this.Event.listeners[t],e):this.Event.listeners[t]&&(this.Event.listeners[t].length=0)},this.$emit=(t,e,r)=>{this.Event.listeners[t]&&this.Event.listeners[t].forEach(t=>t(e,r))}}_lazyLoadHandler(){const r=[];this.ListenerQueue.forEach((t,e)=>{t.el&&t.el.parentNode||r.push(t),t.checkInView()&&t.load()}),r.forEach(t=>{m(this.ListenerQueue,t),t.$destroy()})}_initIntersectionObserver(){f&&(this._observer=new IntersectionObserver(this._observerHandler.bind(this),this.options.observerOptions),this.ListenerQueue.length&&this.ListenerQueue.forEach(t=>{this._observer.observe(t.el)}))}_observerHandler(t,e){t.forEach(e=>{e.isIntersecting&&this.ListenerQueue.forEach(t=>{if(t.el===e.target){if(t.state.loaded)return this._observer.unobserve(t.el);t.load()}})})}_elRenderer(e,r,i){if(e.el){const{el:n,bindType:s}=e;let t;switch(r){case"loading":t=e.loading;break;case"error":t=e.error;break;default:t=e.src}if(s?n.style[s]='url("'+t+'")':n.getAttribute("src")!==t&&n.setAttribute("src",t),n.setAttribute("lazy",r),this.$emit(r,e,i),this.options.adapter[r]&&this.options.adapter[r](e,this.options),this.options.dispatchEvent){const i=new v(r,{detail:e});n.dispatchEvent(i)}}}_valueFormatter(t){let e=t,r=this.options.loading,i=this.options.error;return null!==(n=t)&&"object"==typeof n&&(t.src||this.options.silent,e=t.src,r=t.loading||this.options.loading,i=t.error||this.options.error),{src:e,loading:r,error:i};var n}}}C.install=(t,e={})=>{const r=C(t),i=new r(e),n="2"===t.version.split(".")[0];n?t.directive("lazy",{bind:i.add.bind(i),update:i.update.bind(i),componentUpdated:i.lazyLoadHandler.bind(i),unbind:i.remove.bind(i)}):t.directive("lazy",{bind:i.lazyLoadHandler.bind(i),update(t,e){p(this.vm.$refs,this.vm.$els),i.add(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind(){i.remove(this.el)}})};const H=t=>({props:{tag:{type:String,default:"div"}},render(t){return t(this.tag,null,this.show?this.$slots.default:null)},data(){return{el:null,state:{loaded:!1},rect:{},show:!1}},mounted(){this.el=this.$el,t.addLazyBox(this),t.lazyLoadHandler()},beforeDestroy(){t.removeComponent(this)},methods:{getRect(){this.rect=this.$el.getBoundingClientRect()},checkInView(){return this.getRect(),b&&this.rect.top<window.innerHeight*t.options.preLoad&&0<this.rect.bottom&&this.rect.left<window.innerWidth*t.options.preLoad&&0<this.rect.right},load(){this.show=!0,this.state.loaded=!0,this.$emit("show",this)},destroy(){return this.$destroy}}});H.install=function(t,e={}){const r=C(t),i=new r(e);t.component("lazy-component",H(i))};class B{constructor({lazy:t}){((this.lazy=t).lazyContainerMananger=this)._queue=[]}bind(t,e,r){t=new S({el:t,binding:e,vnode:r,lazy:this.lazy});this._queue.push(t)}update(e,t,r){const i=w(this._queue,t=>t.el===e);i&&i.update({el:e,binding:t,vnode:r})}unbind(e,t,r){const i=w(this._queue,t=>t.el===e);i&&(i.clear(),m(this._queue,i))}}const W={selector:"img"};class S{constructor({el:t,binding:e,vnode:r,lazy:i}){this.el=null,this.vnode=r,this.binding=e,this.options={},this.lazy=i,this._queue=[],this.update({el:t,binding:e})}update({el:t,binding:e}){this.el=t,this.options=p({},W,e.value);const r=this.getImgs();r.forEach(t=>{this.lazy.add(t,p({},this.binding,{value:{src:"dataset"in t?t.dataset.src:t.getAttribute("data-src"),error:("dataset"in t?t.dataset.error:t.getAttribute("data-error"))||this.options.error,loading:("dataset"in t?t.dataset.loading:t.getAttribute("data-loading"))||this.options.loading}}),this.vnode)})}getImgs(){{var e=this.el.querySelectorAll(this.options.selector),r=e.length;const i=[];for(let t=0;t<r;t++)i.push(e[t]);return i}}clear(){const t=this.getImgs();t.forEach(t=>this.lazy.remove(t)),this.vnode=null,this.binding=null,this.lazy=null}}S.install=(t,e={})=>{const r=C(t),i=new r(e),n=new S({lazy:i}),s="2"===t.version.split(".")[0];s?t.directive("lazy-container",{bind:n.bind.bind(n),componentUpdated:n.update.bind(n),unbind:n.unbind.bind(n)}):t.directive("lazy-container",{update(t,e){n.update(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind(){n.unbind(this.el)}})};const k=i=>({props:{src:[String,Object],tag:{type:String,default:"img"}},render(t){return t(this.tag,{attrs:{src:this.renderSrc}},this.$slots.default)},data(){return{el:null,options:{src:"",error:"",loading:"",attempt:i.options.attempt},state:{loaded:!1,error:!1,attempt:0},rect:{},renderSrc:""}},watch:{src(){this.init(),i.addLazyBox(this),i.lazyLoadHandler()}},created(){this.init(),this.renderSrc=this.options.loading},mounted(){this.el=this.$el,i.addLazyBox(this),i.lazyLoadHandler()},beforeDestroy(){i.removeComponent(this)},methods:{init(){var{src:t,loading:e,error:r}=i._valueFormatter(this.src);this.state.loaded=!1,this.options.src=t,this.options.error=r,this.options.loading=e,this.renderSrc=this.options.loading},getRect(){this.rect=this.$el.getBoundingClientRect()},checkInView(){return this.getRect(),b&&this.rect.top<window.innerHeight*i.options.preLoad&&0<this.rect.bottom&&this.rect.left<window.innerWidth*i.options.preLoad&&0<this.rect.right},load(t=j){this.state.attempt>this.options.attempt-1&&this.state.error?(i.options.silent,t()):(t=this.options.src,E({src:t},({src:t})=>{this.renderSrc=t,this.state.loaded=!0},t=>{this.state.attempt++,this.renderSrc=this.options.error,this.state.error=!0}))}}});k.install=(t,e={})=>{const r=C(t),i=new r(e);t.component("lazy-image",k(i))},t.a={install(t,e={}){const r=C(t),i=new r(e),n=new B({lazy:i}),s="2"===t.version.split(".")[0];t.prototype.$Lazyload=i,e.lazyComponent&&t.component("lazy-component",H(i)),e.lazyImage&&t.component("lazy-image",k(i)),s?(t.directive("lazy",{bind:i.add.bind(i),update:i.update.bind(i),componentUpdated:i.lazyLoadHandler.bind(i),unbind:i.remove.bind(i)}),t.directive("lazy-container",{bind:n.bind.bind(n),componentUpdated:n.update.bind(n),unbind:n.unbind.bind(n)})):(t.directive("lazy",{bind:i.lazyLoadHandler.bind(i),update(t,e){p(this.vm.$refs,this.vm.$els),i.add(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind(){i.remove(this.el)}}),t.directive("lazy-container",{update(t,e){n.update(this.el,{modifiers:this.modifiers||{},arg:this.arg,value:t,oldValue:e},{context:this.vm})},unbind(){n.unbind(this.el)}}))}}}}]);